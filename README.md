This repository contains the material used to evaluate **TTool-AIâ€™s CTL property generation** feature.

## Repository Contents

- **`./specifications/`**
  Contains the specifications of the systems used in the evaluation.

- **`./models/`**
  Contains the models with the generated CTL properties for the **DPS** case study. The files are organized as follows:

  - **`DPS.xml`**
    The reference model. When opened in TTool, it contains:
    - a use case diagram,
    - a requirement diagram,
    - a block diagram, and
    - the corresponding state machine diagrams.

  - For i in \[1; 5\]:
    - **`DPS_testi.xml`**
      Contains the raw CTL properties generated by the LLM and their associations with requirements in the requirement diagram.
    - **`DPS_testi_modified.xml`**
      Contains the CTL properties after post-generation reworking.

---

## Replication of the Results

### Opening the Reference Model

- In TTool, open the file **`DPS.xml`**.
- Navigate to the **Block Diagram** (tab `Design`).

---

### Using the AI Assistant

- Click on the **`AI`** icon in the top-right corner of the window to open the TTool-AI interface.
- Select the LLM you want to use.
- From the feature list at the top, select **`Identify safety properties`** (located at the end of the list).
- The system specification and the full list of requirements from the requirement diagram will be automatically loaded.
  - You may delete requirements for which you do not want CTL properties to be generated.
  - We recommend deleting the **`FullRegulationLoop`** requirement, since its coverage is automatically computed from the model-checking results of its sub-requirements.
- Click **`Start`**.
- Once the interaction between TTool-AI and the LLM is complete, the **`Apply response`** button will become active.
- Click **`Apply response`** to parse the LLM output and integrate the generated properties into the block and requirement diagrams.

---

### Analyzing and Modifying the Generated Properties

- After applying the response, return to the main TTool window.
- In the **Block Diagram**, CTL properties appear as **pink boxes**.
- In the **Requirement Diagram**, they appear as **`Property`** boxes linked to requirements via **`verify`** edges.
- You can read, modify, delete, or add CTL properties.
  - Perform modifications first in the **Block Diagram**.
  - If properties are added or deleted, update the corresponding **`verify`** edges in the Requirement Diagram.

---

### Performing Coverage Computation

- In the Block Diagram, launch **syntax checking** (button with the burgundy dotted arrow).
- Click the **`RG`** button to open the model-checking window.
- Enable **`Safety pragmas`** and click **`Start`**.
- Once model checking is complete:
  - Results are backtraced in the Block Diagram:
    - Green tick: property satisfied
    - Red cross: property not satisfied
- Open the **Requirement Diagram** to view the computed, propagated, and backtraced requirement coverage scores.


---


Enjoy!
